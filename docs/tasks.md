# å¼€å‘ä»»åŠ¡è®¡åˆ’ï¼šPolymarket ç›‘æ§æœºå™¨äºº

**é¡¹ç›®**: Polymarket Smart Money Monitor  
**çŠ¶æ€**: ğŸ“… å¾…å¼€å§‹  
**è´Ÿè´£äºº**: [Your Name]  
**é¢„è®¡å·¥æœŸ**: 3-5 å¤©

---

## ğŸ“… é˜¶æ®µ 0: ç¯å¢ƒå‡†å¤‡ä¸åŸºç¡€è®¾æ–½ (Environment Setup)

**ç›®æ ‡**: å®Œæˆé¡¹ç›®åˆå§‹åŒ–ï¼Œé…ç½®å¥½æ•°æ®åº“å’ŒåŸºç¡€ä¾èµ–ã€‚

- [ ] **0.1 é¡¹ç›®åˆå§‹åŒ–**
  - [ ] `npm init` & Git ä»“åº“åˆå§‹åŒ–ã€‚
  - [ ] é…ç½® `.gitignore` (æ’é™¤ `node_modules`, `.env`, `dist`).
  - [ ] åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„ (`src/`, `src/services`, `src/db` ç­‰)ã€‚
- [ ] **0.2 ä¾èµ–å®‰è£…**
  - [ ] å®‰è£…æ ¸å¿ƒåº“: `ethers`, `axios`, `node-telegram-bot-api`, `@supabase/supabase-js`, `dotenv`.
  - [ ] å®‰è£…å¼€å‘ä¾èµ–: `typescript`, `ts-node`, `nodemon` (æˆ– `tsx`), `@types/*`.
  - [ ] é…ç½® `tsconfig.json` (Target: ES2020, Module: CommonJS/NodeNext).
- [ ] **0.3 Supabase æ•°æ®åº“é…ç½®**
  - [ ] åˆ›å»º Supabase Projectã€‚
  - [ ] åœ¨ SQL Editor æ‰§è¡Œå»ºè¡¨è¯­å¥ (`monitored_wallets`)ã€‚
  - [ ] è·å– `SUPABASE_URL` å’Œ `SUPABASE_KEY`ã€‚
  - [ ] é…ç½® `.env` æ–‡ä»¶ã€‚

---

## ğŸ“… é˜¶æ®µ 1: æ•°æ®å±‚ä¸çŠ¶æ€ç®¡ç† (Data Layer)

**ç›®æ ‡**: å®ç°â€œå†…å­˜+æ•°æ®åº“â€çš„åŒå±‚å­˜å‚¨é€»è¾‘ï¼Œç¡®ä¿è¯»å†™é«˜æ€§èƒ½ã€‚

- [ ] **1.1 Supabase æœåŠ¡å°è£… (`src/db/supabase.ts`)**
  - [ ] åˆå§‹åŒ– Supabase Clientã€‚
  - [ ] å®ç° `loadAll()`: ä» DB æ‹‰å–æ‰€æœ‰æ•°æ®ã€‚
  - [ ] å®ç° `addWallet(address, name)`: å†™å…¥ DBã€‚
  - [ ] å®ç° `removeWallet(address)`: åˆ é™¤ DB è®°å½•ã€‚
- [ ] **1.2 å†…å­˜ç¼“å­˜é€»è¾‘ (`src/services/store.ts`)**
  - [ ] å®šä¹‰å…¨å±€ `Map<string, string>`ã€‚
  - [ ] å®ç° `init()` æ–¹æ³•ï¼šå¯åŠ¨æ—¶è°ƒç”¨ `loadAll` å¹¶å¡«å…… Mapã€‚
  - [ ] å°è£…ç»Ÿä¸€çš„ CRUD æ¥å£ï¼ˆåŒæ—¶æ›´æ–° DB å’Œ Mapï¼‰ã€‚
- [ ] **1.3 å•å…ƒæµ‹è¯• (æ‰‹åŠ¨)**
  - [ ] ç¼–å†™ä¸€ä¸ªæµ‹è¯•è„šæœ¬ï¼ŒéªŒè¯å¢åˆ æ”¹æŸ¥æ˜¯å¦åŒæ—¶åœ¨ DB å’Œå†…å­˜ç”Ÿæ•ˆã€‚

---

## ğŸ“… é˜¶æ®µ 2: é“¾ä¸Šç›‘å¬æ ¸å¿ƒ (Blockchain Listener)

**ç›®æ ‡**: èƒ½å¤Ÿå®æ—¶æ•è· Polygon é“¾ä¸Šçš„ç›®æ ‡è½¬è´¦äº‹ä»¶ã€‚

- [ ] **2.1 WebSocket è¿æ¥ (`src/services/listener.ts`)**
  - [ ] ä½¿ç”¨ `ethers.WebSocketProvider` è¿æ¥èŠ‚ç‚¹ã€‚
  - [ ] å®ç°æ–­çº¿é‡è¿é€»è¾‘ (Heartbeat / Reconnect)ã€‚
  - [ ] å®ä¾‹åŒ– Polymarket CTF åˆçº¦å¯¹è±¡ã€‚
- [ ] **2.2 äº‹ä»¶è¿‡æ»¤å™¨å®ç°**
  - [ ] ç›‘å¬ `TransferSingle` äº‹ä»¶ã€‚
  - [ ] ç›‘å¬ `TransferBatch` äº‹ä»¶ã€‚
  - [ ] **æ ¸å¿ƒé€»è¾‘**: åœ¨å›è°ƒä¸­åˆ¤æ–­ `to` åœ°å€æ˜¯å¦å­˜åœ¨äº `store` çš„ Map ä¸­ã€‚
  - [ ] **æ ¸å¿ƒé€»è¾‘**: è¿‡æ»¤ `value > 0` çš„äº¤æ˜“ã€‚
- [ ] **2.3 åˆæ­¥éªŒè¯**
  - [ ] è¿è¡Œè„šæœ¬ï¼Œä½¿ç”¨å·²çŸ¥æ´»è·ƒåœ°å€ï¼ˆå¦‚æ–‡æ¡£ä¸­çš„ç¤ºä¾‹ï¼‰è¿›è¡Œæµ‹è¯•ï¼Œè§‚å¯Ÿ Console æ˜¯å¦æ‰“å°æ—¥å¿—ã€‚

---

## ğŸ“… é˜¶æ®µ 3: ä¸šåŠ¡é€»è¾‘ä¸ API é›†æˆ (Business Logic)

**ç›®æ ‡**: å°†æ™¦æ¶©çš„é“¾ä¸Š Hash è½¬åŒ–ä¸ºäººç±»å¯è¯»çš„äº¤æ˜“è¯¦æƒ…ã€‚

- [ ] **3.1 API å®¢æˆ·ç«¯å°è£… (`src/services/api.ts`)**
  - [ ] å®šä¹‰ `PolymarketActivity` æ¥å£ç±»å‹ã€‚
  - [ ] å®ç° `fetchActivity(address)` å‡½æ•° (Axios)ã€‚
- [ ] **3.2 åŒ¹é…ä¸é‡è¯•ç­–ç•¥ (å…³é”®)**
  - [ ] å®ç° `processTrade(address, txHash, timestamp)` ä¸»é€»è¾‘ã€‚
  - [ ] æ·»åŠ  `sleep(ms)` å·¥å…·å‡½æ•°ã€‚
  - [ ] **å®ç°åŒ¹é…é€»è¾‘**: è¿‡æ»¤ `type=TRADE` & `side=BUY`ï¼Œæ ¡éªŒæ—¶é—´æˆ³ã€‚
  - [ ] **å®ç°é‡è¯•å¾ªç¯**: è‹¥ API è¿”å›ä¸ºç©ºæˆ–æ—§æ•°æ®ï¼Œç­‰å¾… 1.5s åé‡è¯• (Max 3 æ¬¡)ã€‚
- [ ] **3.3 æ¶ˆæ¯æ ¼å¼åŒ– (`src/utils/formatter.ts`)**
  - [ ] ç¼–å†™å‡½æ•°å°† Activity å¯¹è±¡è½¬æ¢ä¸º HTML/Markdown å­—ç¬¦ä¸²ã€‚
  - [ ] å¤„ç†æ•°å­—ç²¾åº¦ (USDC) å’Œè·³è½¬é“¾æ¥ã€‚

---

## ğŸ“… é˜¶æ®µ 4: Telegram æœºå™¨äººäº¤äº’ (Bot Interface)

**ç›®æ ‡**: è®©ç”¨æˆ·å¯ä»¥é€šè¿‡ TG æŒ‡ä»¤æ§åˆ¶ç³»ç»Ÿã€‚

- [ ] **4.1 Bot åˆå§‹åŒ– (`src/services/bot.ts`)**
  - [ ] é…ç½® `node-telegram-bot-api`ã€‚
  - [ ] å®ç° `/start` å‘½ä»¤ã€‚
- [ ] **4.2 æŒ‡ä»¤å¼€å‘**
  - [ ] å®ç° `/add <addr> <name>`: è°ƒç”¨ `store.add`ï¼Œå¹¶å›å¤ç»“æœã€‚
  - [ ] å®ç° `/remove <addr>`: è°ƒç”¨ `store.remove`ã€‚
  - [ ] å®ç° `/list`: éå†å†…å­˜ Map å¹¶è¾“å‡ºã€‚
- [ ] **4.3 æ¶ˆæ¯æ¨é€æ¥å£**
  - [ ] å°è£… `notifyUser(chatId, message)` å‡½æ•°ã€‚
  - [ ] å°†é˜¶æ®µ 3 çš„å¤„ç†ç»“æœå¯¹æ¥è‡³æ­¤æ¥å£ã€‚

---

## ğŸ“… é˜¶æ®µ 5: é›†æˆæµ‹è¯•ä¸éƒ¨ç½² (Deployment)

**ç›®æ ‡**: ç”Ÿäº§ç¯å¢ƒä¸Šçº¿ã€‚

- [ ] **5.1 å®Œæ•´é“¾è·¯æµ‹è¯•**
  - [ ] æœ¬åœ°å¯åŠ¨ Botã€‚
  - [ ] æ·»åŠ ä¸€ä¸ªé«˜é¢‘äº¤æ˜“åœ°å€ï¼ˆå¯åœ¨ Polymarket Leaderboard æ‰¾ï¼‰ã€‚
  - [ ] è§‚å¯Ÿï¼šé“¾ä¸Šè§¦å‘ -> API è¯·æ±‚ -> TG æ”¶åˆ°é€šçŸ¥ã€‚
  - [ ] æ£€æŸ¥å»¶è¿Ÿæ˜¯å¦åœ¨å¯æ¥å—èŒƒå›´ (5-10 ç§’å†…)ã€‚
- [ ] **5.2 ç¨³å®šæ€§ä¼˜åŒ–**
  - [ ] æ¨¡æ‹Ÿæ–­ç½‘ï¼Œæµ‹è¯• WSS æ˜¯å¦è‡ªåŠ¨é‡è¿ã€‚
  - [ ] æ£€æŸ¥å†…å­˜å ç”¨ã€‚
- [ ] **5.3 éƒ¨ç½²**
  - [ ] å‡†å¤‡æœåŠ¡å™¨ (VPS: Ubuntu/Debian)ã€‚
  - [ ] å®‰è£… Node.js, PM2ã€‚
  - [ ] éƒ¨ç½²ä»£ç  (`git clone` æˆ–ä¸Šä¼ )ã€‚
  - [ ] `npm run build` & `pm2 start dist/index.js`ã€‚

---

## ğŸ“ å¤‡æ³¨ä¸é£é™©ç‚¹

- **API Rate Limit**: æ³¨æ„ Polymarket API çš„é¢‘ç‡é™åˆ¶ï¼Œå¦‚æœæ˜¯ä¸ªäººä½¿ç”¨é€šå¸¸æ²¡é—®é¢˜ï¼Œå¤§è§„æ¨¡ä½¿ç”¨éœ€åŠ ä»£ç†ã€‚
- **RPC èŠ‚ç‚¹**: å…¬å…±èŠ‚ç‚¹ (`publicnode`) å¯èƒ½ä¼šé™æµæˆ–æ–­è¿ã€‚å¦‚æœç”Ÿäº§ç¯å¢ƒä¸ç¨³å®šï¼Œå»ºè®®è´­ä¹° Alchemy æˆ– Infura çš„å…è´¹/ä»˜è´¹èŠ‚ç‚¹ã€‚
